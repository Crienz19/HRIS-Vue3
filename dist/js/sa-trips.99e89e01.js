(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sa-trips"],{"99af":function(e,t,n){"use strict";var r=n("23e7"),a=n("d039"),c=n("e8b5"),l=n("861d"),o=n("7b0b"),i=n("50c4"),s=n("8418"),d=n("65f0"),u=n("1dde"),m=n("b622"),p=n("2d00"),b=m("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",f=p>=51||!a((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),v=u("concat"),V=function(e){if(!l(e))return!1;var t=e[b];return void 0!==t?!!t:c(e)},E=!f||!v;r({target:"Array",proto:!0,forced:E},{concat:function(e){var t,n,r,a,c,l=o(this),u=d(l,0),m=0;for(t=-1,r=arguments.length;t<r;t++)if(c=-1===t?l:arguments[t],V(c)){if(a=i(c.length),m+a>j)throw TypeError(O);for(n=0;n<a;n++,m++)n in c&&s(u,m,c[n])}else{if(m>=j)throw TypeError(O);s(u,m++,c)}return u.length=m,u}})},e446:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a=Object(r["createElementVNode"])("div",{class:"row"},[Object(r["createElementVNode"])("div",{class:"col-12"},[Object(r["createElementVNode"])("div",{class:"alert alert-primary"}," jksldfjsl ")])],-1),c={class:"row"},l={class:"col-12"},o={class:"card"},i=Object(r["createStaticVNode"])('<div class="card-header"><h5 class="card-title"><b>Trip Request</b></h5><div class="card-tools"><div class="input-group input-group-sm" style="width:150px;"><input type="text" name="table_search" class="form-control float-right" placeholder="Search"><div class="input-group-append"><button type="submit" class="btn btn-default"><i class="fas fa-search"></i></button></div></div></div></div>',1),s={class:"card-body p-0"},d={class:"table table-hovered table-striped text-sm"},u=Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",{class:"text-center"},[Object(r["createElementVNode"])("th",{class:"text-left"},"ID"),Object(r["createElementVNode"])("th",null,"First Name"),Object(r["createElementVNode"])("th",null,"Last name"),Object(r["createElementVNode"])("th",null,"Date From"),Object(r["createElementVNode"])("th",null,"Date To"),Object(r["createElementVNode"])("th",null,"Time In"),Object(r["createElementVNode"])("th",null,"Time Out"),Object(r["createElementVNode"])("th",null,"Dest. From"),Object(r["createElementVNode"])("th",null,"Dest. To"),Object(r["createElementVNode"])("th",null,"Status"),Object(r["createElementVNode"])("th",null,"Created At"),Object(r["createElementVNode"])("th",null,"Actions")])],-1),m={key:0},p=Object(r["createElementVNode"])("tr",{class:"text-center"},[Object(r["createElementVNode"])("td",{colspan:"12"},[Object(r["createElementVNode"])("i",{class:"fas fa-spinner fa-pulse fa-2x"})])],-1),b=[p],j={key:1,class:"text-center"},O={class:"text-left"},f=["onChange"],v={selected:""},V=Object(r["createElementVNode"])("option",{value:"Pending"},"Pending",-1),E=Object(r["createElementVNode"])("option",{value:"Acknowledged"},"Acknowledged",-1),N=["onClick"],g=Object(r["createElementVNode"])("i",{class:"fas fa-search"},null,-1),h=[g],T=["onClick"],_=Object(r["createElementVNode"])("i",{class:"fas fa-times"},null,-1),x=[_],y={class:"modal fade show",id:"modal-lg","aria-modal":"true",role:"dialog"},w={class:"modal-dialog modal-lg modal-dialog-centered"},k={class:"modal-content"},D={class:"modal-header"},R={class:"modal-title"},S=Object(r["createElementVNode"])("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[Object(r["createElementVNode"])("span",{"aria-hidden":"true"},"Ã—")],-1),B={class:"modal-body"},q={class:"row"},C={class:"form-group col-md-6"},L=Object(r["createElementVNode"])("label",null,"Date From",-1),A={class:"form-group col-md-6"},F=Object(r["createElementVNode"])("label",null,"Date To",-1),M={class:"form-group col-md-6"},U=Object(r["createElementVNode"])("label",null,"Time In",-1),I={class:"form-group col-md-6"},J=Object(r["createElementVNode"])("label",null,"Time Out",-1),P={key:0,class:"form-group col-6"},z=Object(r["createElementVNode"])("label",null,"Destination From",-1),G={key:1,class:"form-group col-6"},H=Object(r["createElementVNode"])("label",null,"To",-1),K={class:"form-group col-12"},Q=Object(r["createElementVNode"])("label",null,"Reason",-1);function W(e,t,n,p,g,_){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[a,Object(r["createElementVNode"])("div",c,[Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("div",o,[i,Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("table",d,[u,e.trip.isRequestLoading?(Object(r["openBlock"])(),Object(r["createElementBlock"])("tbody",m,b)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("tbody",j,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.trips,(function(t,n){var a,c;return Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:t.id},[Object(r["createElementVNode"])("td",O,Object(r["toDisplayString"])(t.id),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(null===(a=t.employee)||void 0===a?void 0:a.first_name),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(null===(c=t.employee)||void 0===c?void 0:c.last_name),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.date_from),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.date_to),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.time_in.standard),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.time_out.standard),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.destination_from),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.destination_to),1),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("select",{onChange:function(r){return e.changeTripStatus(t,n,r.target.value)},class:"form-control form-control-xs"},[Object(r["createElementVNode"])("option",v,Object(r["toDisplayString"])(t.status),1),V,E],40,f)]),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.created_at),1),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("button",{onClick:function(n){return e.selectTrip(t)},"data-toggle":"modal","data-target":"#modal-lg",class:"btn btn-primary btn-xs mr-1"},h,8,N),Object(r["createElementVNode"])("button",{onClick:function(r){return e.deleteTripRequest(t.id,n)},class:"btn btn-danger btn-xs mr-1"},x,8,T)])])})),128))]))])])])])]),Object(r["createElementVNode"])("div",y,[Object(r["createElementVNode"])("div",w,[Object(r["createElementVNode"])("div",k,[Object(r["createElementVNode"])("div",D,[Object(r["createElementVNode"])("h4",R,"Trip of "+Object(r["toDisplayString"])(e.selectedTrip.first_name)+" "+Object(r["toDisplayString"])(e.selectedTrip.last_name),1),S]),Object(r["createElementVNode"])("div",B,[Object(r["createElementVNode"])("div",q,[Object(r["createElementVNode"])("div",C,[L,Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectedTrip.date_from=t}),type:"text",class:"form-control form-control-sm",disabled:""},null,512),[[r["vModelText"],e.selectedTrip.date_from]])]),Object(r["createElementVNode"])("div",A,[F,Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedTrip.date_to=t}),type:"text",class:"form-control form-control-sm",disabled:""},null,512),[[r["vModelText"],e.selectedTrip.date_to]])]),Object(r["createElementVNode"])("div",M,[U,Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectedTrip.time_in=t}),type:"text",class:"form-control form-control-sm",disabled:""},null,512),[[r["vModelText"],e.selectedTrip.time_in]])]),Object(r["createElementVNode"])("div",I,[J,Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selectedTrip.time_out=t}),type:"text",class:"form-control form-control-sm",disabled:""},null,512),[[r["vModelText"],e.selectedTrip.time_out]])]),e.selectedTrip.destination_from?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",P,[z,Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.selectedTrip.destination_from=t}),type:"text",class:"form-control form-control-sm",disabled:""},null,512),[[r["vModelText"],e.selectedTrip.destination_from]])])):Object(r["createCommentVNode"])("",!0),e.selectedTrip.destination_to?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",G,[H,Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.selectedTrip.destination_to=t}),type:"text",class:"form-control form-control-sm",disabled:""},null,512),[[r["vModelText"],e.selectedTrip.destination_to]])])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",K,[Q,Object(r["withDirectives"])(Object(r["createElementVNode"])("textarea",{"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.selectedTrip.purpose=t}),disabled:"",cols:"30",rows:"10",class:"form-control form-control-sm"},null,512),[[r["vModelText"],e.selectedTrip.purpose]])])])])])])])],64)}var X=n("1da1"),Y=(n("99af"),n("96cf"),n("a434"),n("5a15")),Z=n("be92"),$=Object(Z["b"])({id:"superadmin_trip",state:function(){return{trips:[],isRequestLoading:!1}},getters:{getAllFiledTrips:function(){return this.trips}},actions:{loadAllTrips:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.trips.length){t.next=7;break}return e.isRequestLoading=!0,t.next=4,Y["a"].get("/api/sa/trips");case 4:n=t.sent,e.trips=n.data.data,e.isRequestLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},changeTripStatusTo:function(e,t){var n=this;return Object(X["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.isRequestLoading=!0,r.next=3,Y["a"].patch("/api/sa/trips/".concat(e.id),e);case 3:a=r.sent,n.trips.splice(t,1,a.data.data),n.isRequestLoading=!1;case 6:case"end":return r.stop()}}),r)})))()},deleteTrip:function(e,t){var n=this;return Object(X["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.isRequestLoading=!0,r.next=3,Y["a"].delete("/api/sa/trips/".concat(e));case 3:n.trips.splice(t,1),n.isRequestLoading=!1;case 5:case"end":return r.stop()}}),r)})))()}}}),ee=n("854a"),te=Object(r["defineComponent"])({setup:function(){var e=$(),t=Object(r["computed"])((function(){return e.getAllFiledTrips})),n=Object(r["ref"])({first_name:"",last_name:"",date_from:"",date_to:"",time_in:"",time_out:"",destination_from:"",destination_to:"",purpose:""});Object(r["onBeforeMount"])(Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadAllTrips();case 2:case"end":return t.stop()}}),t)}))));var a=function(){var t=Object(X["a"])(regeneratorRuntime.mark((function t(n,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.status=a,t.next=3,e.changeTripStatusTo(n,r);case 3:ee["success"]("Business Trip ID ".concat(n.id," set to ").concat(n.status));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),c=function(e){n.value.first_name=e.employee.first_name,n.value.last_name=e.employee.last_name,n.value.date_from=e.date_from,n.value.date_to=e.date_to,n.value.time_in=e.time_in.standard,n.value.time_out=e.time_out.standard,n.value.destination_from=e.destination_from,n.value.destination_to=e.destination_to,n.value.purpose=e.purpose},l=function(){var t=Object(X["a"])(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=confirm("Delete this request?"),!a){t.next=4;break}return t.next=4,e.deleteTrip(n,r);case 4:ee["success"]("Business trip ID ".concat(n," has been deleted."));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{trip:e,trips:t,selectedTrip:n,selectTrip:c,changeTripStatus:a,deleteTripRequest:l}}}),ne=n("6b0d"),re=n.n(ne);const ae=re()(te,[["render",W]]);t["default"]=ae}}]);
//# sourceMappingURL=sa-trips.99e89e01.js.map